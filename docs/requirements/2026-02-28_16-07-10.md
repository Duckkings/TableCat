# TableCat 待完成实现面板（2026-02-28 16:07:10）

## 背景
基于当天已完成的第一阶段实现，屏幕门控、ROI、多图送模、评分 debug、日志落盘已经接入。本文档保留后续需要继续推进和调优的事项。

## 当前已完成
- 屏幕独立门控循环
- L0 / L1 基础判断
- ROI 提案
- `finalScore` 触发
- 多图送模
- 高分事件抢占当前回复
- 调试评分牌
- Session 日志、截图目录、门控目录

## 待继续实现
### P0
1. 前台窗口探测稳定性
- 继续观察 `foregroundWindow` 在不同机器上的超时和兼容性
- 必要时增加缓存、超时和降级策略

2. 设置面板文案清理
- 清掉历史乱码文案
- 用更明确的中文区分：
  - 检测间隔
  - AI 最短提交间隔
  - 主动陪伴

3. 抢占策略调参
- 控制高分抢占不要过于频繁
- 必要时增加抢占最小差值阈值
- 避免气泡在高活动场景下过度抖动

### P1
4. 自适应采样频率
- 平时保持 `200ms ~ 500ms`
- 活动明显时临时升到 `100ms`
- 稳定后自动回落

5. 高频模式性能保护
- 活跃升频时默认减少落盘
- 继续观察 CPU、主进程阻塞和 IO 压力

6. Debug 面板增强
- 增强当前回复分数、阶段、冷却原因显示
- 让“为什么是 cooldown”更直观

### P2
7. 主动陪伴策略完善
- 继续完善低打扰触发条件
- 与正常门控触发分开统计

8. Novelty 升级
- 保留当前签名法
- 后续再考虑更稳的文本签名或 embedding

## 推荐参数
### 日常运行
- `screen_gate_tick_ms = 500`
- `screen_global_cooldown_sec = 1 ~ 3`

### 调试运行
- `screen_gate_tick_ms = 100`
- `screen_global_cooldown_sec = 1`
- 可关闭部分帧落盘以减少 IO

## 相关文档
- `docs/design/design.md`
- `docs/tech/tech-design.md`
- `docs/tech/multilevel-gating.md`
- `docs/tech/trigger-mechanism.md`
