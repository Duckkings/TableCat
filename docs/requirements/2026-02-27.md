# TableCat 今日需求（2026-02-27）

## 目标
今天把项目从“可启动演示版”推进到“可配置、可持续迭代”的可用版本。

## 需求清单（按优先级）
1. 设置面板 MVP（P0）
- 支持查看并修改 `bubble_timeout_sec`。
- 点击保存后写回 `app.config.json`，无需手改文件。
- 保存后立即在当前会话生效。
验收标准：设置按钮可打开面板，修改数值后重启仍保持。

2. 角色卡切换（P0）
- 设置中可填写 `role_card_path` 并校验可读性。
- 切换后立即更新宠物图标并可请求首次问候。
验收标准：切换到不同角色卡后，气泡风格与图标可变化。

3. 首次问候与错误提示可观测性（P1）
- 区分“配置错误”和“网络/API 请求错误”提示。
- 关键日志明确落盘，便于定位问题。
验收标准：故障场景下 UI 文案与日志可快速定位根因。

4. 交互式聊天窗口 MVP（P1）
- 双击宠物打开简易聊天窗。
- 支持输入文本、发送请求、展示结构化回复中的 `content`。
验收标准：能完成一轮手动问答并写入记忆。

5. 感知调度骨架接线（P2）
- 接入调度器生命周期（可开关、可配置间隔）。
- 先用占位输入替代真实截图/音频，跑通分流请求结构。
验收标准：可按间隔触发请求，日志可看到多路 `source` 标签。

## 今日执行记录
- [x] 创建今日需求文件。
- [x] 完成：设置面板 MVP（读取/保存 `bubble_timeout_sec`，即时生效并持久化）。
- [x] 完成：首次问候错误提示与配置错误提示分离。
- [x] 完成：角色卡切换（`role_card_path` 可配置 + 运行时生效 + 自动首次问候）。
- [x] 完成：交互式聊天窗口 MVP（双击打开、回车发送、回复回显与记忆写入）。
- [x] 完成：感知调度骨架接线（配置驱动、占位多路输入、日志可观测，默认关闭）。
- [x] 完成：设置中心扩展（感知总开关、感知间隔、三路感知开关可配置并实时生效）。
