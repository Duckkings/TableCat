# 桌面宠物架构设计
- 用于对用户计算机操作进行认知然后进行角色扮演反馈的桌面陪伴软件

## 感知
### 感知间隔
- 可配置多少秒进行一次感知
- 限制传送大模型的token数，可配置
- 感知间隔时候收集信息，时间到后统一送入大模型
### 桌面截图
- 桌面截图送入大模型
### 语音接收
- 从系统麦克风接收用户语音
### 电脑语音识别
- 从桌面语音接收语音
#### 分流感知
- 不要将三个部分的感知合流送入大模型
- 送入时标注好是哪个部分的信息

## 记忆
### 互动转结构化记忆
### AI请求从记忆发送不包含上下文
### 默认角色扮演提示词：正常交流、吐槽般简短，除非要求详细解释；第一人称回复
### AI回复包含记忆总结，软件将记忆写入角色卡记忆区

## 回复
### 接入语音模型文本转语音
### 在桌面宠物头顶冒聊天气泡
### 气泡自动消失时间可配置，默认3s，新回复刷新计时
### 回复结构化格式：推理内容、情绪、回复内容、记忆总结（JSON）
### 启动后首次互动：软件启动后向 AI 请求第一次问候

## 界面
### 桌面宠物永远在最前端
### 宠物窗口支持鼠标拖动移动
### 鼠标移动到上面后左上角会出现setting按钮
- 设置里面可以配置缩放
- openai的api
- 角色卡，点击可以从本地选中json文件作为角色prompt
- 退出软件
### 增加按钮打开所有回复内容
### 双击可以打开交互式聊天窗口

## 使用流程
### 打开软件后检查是否有角色配置
- 若有，则直接启动
- 若无，使用者可以新建角色卡，然后选中角色卡存放路径。或者使用已有角色卡，从本地选中一个json过格式校验后启动
### 启动完成后自动请求首次问候并显示/播报

## 角色卡（配置文件）
### 角色prompt
### 用户配置，api，缩放等
### 宠物图标路径（可选），若未配置则仅显示面板
